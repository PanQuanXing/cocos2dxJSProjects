{"version":3,"sources":["../../../../assets/scripts/assets/scripts/Player.js"],"names":["cc","Class","extends","Component","properties","jumpHeight","jumpDuration","maxMoveSpeed","accel","jumpAudio","default","url","AudioClip","setJumpAction","jumpUp","moveBy","p","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","callback","callFunc","playJumpSound","repeatForever","sequence","audioEngine","playEffect","onLoad","jumpAction","node","runAction","accLeft","accRight","xSpeed","setInputControl","self","eventManager","addListener","event","EventListener","KEYBOARD","onKeyPressed","keyCode","KEY","a","d","onKeyReleased","update","dt","Math","abs","x","start"],"mappings":"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","file":"Player.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    //继承自主件Component类\n    extends: cc.Component,\n\n    properties: {\n    \t\n    \tjumpHeight:0,\n    \tjumpDuration:0,\n    \tmaxMoveSpeed:0,\n    \taccel:0,\n        jumpAudio:{\n            default:null,\n            url:cc.AudioClip\n        }\n\n    },\n\n\n    //使用的是CommonJs规范\n\n    setJumpAction:function(){\n        //弹起动作\n        var jumpUp=cc.moveBy(this.jumpDuration,cc.p(0,this.jumpHeight)).easing(cc.easeCubicActionOut());\n        //落下动作\n        var jumpDown=cc.moveBy(this.jumpDuration,cc.p(0,-this.jumpHeight)).easing(cc.easeCubicActionIn());\n        var callback=cc.callFunc(this.playJumpSound,this);\n        return cc.repeatForever(cc.sequence(jumpUp,jumpDown,callback));\n    },\n\n    //播放音效函数\n    playJumpSound:function(){\n        cc.audioEngine.playEffect(this.jumpAudio,false);\n    },\n    //action入口\n    onLoad:function(){\n        //初始化跳跃动作\n        this.jumpAction=this.setJumpAction();\n        this.node.runAction(this.jumpAction);\n\n        this.accLeft=false;\n        this.accRight=false;\n\n        this.xSpeed=0;\n\n        this.setInputControl();\n    },\n    //添加键盘输入事件\n    setInputControl:function(){\n        var self=this;\n        cc.eventManager.addListener({\n            event:cc.EventListener.KEYBOARD,\n            onKeyPressed:function(keyCode,event){\n                switch(keyCode){\n                    case cc.KEY.a:\n                        self.accLeft=true;\n                        self.accRight=false;\n                        break;\n                    case cc.KEY.d:\n                        self.accLeft=false;\n                        self.accRight=true;\n                        break;\n                }\n            },\n            onKeyReleased:function(keyCode,event){\n                switch(keyCode){\n                    case cc.KEY.a:\n                        self.accLeft=false;\n                        break;\n                    case cc.KEY.d:\n                        self.accRight=false;\n                        break;\n                }\n            }\n        },self.node);\n    },\n    //update接口用于更新主角的action\n    update:function(dt){\n        if(this.accLeft){\n            this.xSpeed-=this.accel*dt;\n        }else if(this.accRight){\n            this.xSpeed+=this.accel*dt;\n        }\n        //限制MaxSpeed\n        if(Math.abs(this.xSpeed)>this.maxMoveSpeed){\n            this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed);\n        }\n        this.node.x+=this.xSpeed*dt;\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n});\n"]}